(this["webpackJsonpcopperdaily-react"]=this["webpackJsonpcopperdaily-react"]||[]).push([[0],{29:function(n,e,t){n.exports=t(41)},40:function(n,e,t){},41:function(n,e,t){"use strict";t.r(e);var a=t(0),r=t.n(a),l=t(23),c=t.n(l),i=t(9),u=t(3),o=t(1),d=t(2);function f(){var n=Object(o.a)(["\n\n    >ul {   \n      border-top: 1px solid #777;\n      display: flex;\n      >li{\n      width: 33.33333%;\n      text-align: center;\n      margin: 20px;\n        > a{       \n            &.value {\n            background:#edfa00 ;\n             }\n         }\n      }  \n"]);return f=function(){return n},n}var s=d.a.nav(f()),m=function(){return r.a.createElement(s,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.c,{to:"/tags",activeClassName:"value"},"\u6807\u7b7e")),r.a.createElement("li",null,r.a.createElement(i.c,{to:"/copper",activeClassName:"value"},"\u8bb0\u4e00\u7b14")),r.a.createElement("li",null,r.a.createElement(i.c,{to:"/statistics",activeClassName:"value"},"\u7edf\u8ba1"))))};function p(){var n=Object(o.a)(["\nflex-grow: 1;\noverflow: auto;\n"]);return p=function(){return n},n}function b(){var n=Object(o.a)(["\nmin-height: 100vh;\ndisplay:flex;\nflex-direction: column;\n"]);return b=function(){return n},n}var g=d.a.div(b()),x=d.a.div(p()),v=function(n){return r.a.createElement(g,null,r.a.createElement(x,{className:n.className},n.children),r.a.createElement(m,null))},E=t(11),h=t(5),O=parseInt(window.localStorage.getItem("idMax")||"0"),j=function(){return O+=1,window.localStorage.setItem("idMax",JSON.stringify(O)),O},k=function(n,e){var t=Object(a.useRef)(0);Object(a.useEffect)((function(){t.current+=1})),Object(a.useEffect)((function(){t.current>1&&n()}),[n,e])},y=function(){var n=Object(a.useState)([]),e=Object(h.a)(n,2),t=e[0],r=e[1];Object(a.useEffect)((function(){var n=JSON.parse(window.localStorage.getItem("tags")||"[]");0===n.length&&(n=[{id:j(),name:"\u8863"},{id:j(),name:"\u98df"},{id:j(),name:"\u4f4f"},{id:j(),name:"\u884c"}]),r(n)}),[]),k((function(){window.localStorage.setItem("tags",JSON.stringify(t))}),t);return{tags:t,getName:function(n){var e=t.filter((function(e){return e.id===n}))[0];return e?e.name:""},setTags:r,findTag:function(n){return t.filter((function(e){return e.id===n}))[0]},updateTag:function(n,e){var a=e.name;r(t.map((function(e){return e.id===n?{id:n,name:a}:e})))},findTagIndex:function(n){for(var e=-1,a=0;a<t.length;a++)if(t[a].id===n){e=a;break}return e},deleteTag:function(n){r(t.filter((function(e){return e.id!==n})))},addTag:function(){var n=window.prompt("\u8bf7\u8f93\u5165\u6807\u7b7e\u540d");null!==n&&""!==n&&r([].concat(Object(E.a)(t),[{id:j(),name:n}]))}}};function w(){var n=Object(o.a)(["\n  margin-top: 16px;\n  font-size: 16px;\n  border: none;\n  background: #bababa;\n  padding: 8px 12px;\n  border-radius: 12px;\n\n"]);return w=function(){return n},n}var C=d.a.button(w());function S(){var n=Object(o.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return S=function(){return n},n}var N=d.a.div(S());function I(){var n=Object(o.a)(["\n  font-size: 16px;\n\n  > li{\n    margin: 12px;\n    background: #f5f5f5;\n    border: 1px solid #777;\n    border-radius: 10px;\n    line-height: 20px;\n\n\n    > a {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 8px 16px;\n    }\n    > span{\n       display: inline;\n    }\n  }\n"]);return I=function(){return n},n}var z=d.a.ol(I());var T=function(){var n=y(),e=n.tags,t=n.addTag;return r.a.createElement(v,null,r.a.createElement(z,null,e.map((function(n){return r.a.createElement("li",{key:n.id},r.a.createElement(i.b,{to:"/tags/"+n.id},n.name,r.a.createElement("span",null," \u2192 ")))}))),r.a.createElement(N,null,r.a.createElement(C,{onClick:t},"\u65b0\u589e\u6807\u7b7e")))},J=t(12);function D(){var n=Object(o.a)(["\n  >ul {\n  display: flex;\n  > li {\n    margin: 4px 10px;\n    border-radius: 8px;\n    padding: 12px 0;\n    width: 50%;\n    text-align: center;\n    font-size: 18px;\n    border: 1px solid #777;\n    &.selected {\n      background:#edfa00;\n      }\n    }\n  }\n\n"]);return D=function(){return n},n}var M=d.a.section(D()),K=function(n){var e={"-":"\u652f\u51fa","+":"\u6536\u5165"},t=Object(a.useState)(["-","+"]),l=Object(h.a)(t,1)[0],c=n.value;return r.a.createElement(M,null,r.a.createElement("ul",null,l.map((function(t){return r.a.createElement("li",{key:t,className:c===t?"selected":"",onClick:function(){n.onChange(t)}},e[t])}))))},Y=t(28);function L(){var n=Object(o.a)(["\n display: flex;\n    align-items: center;\n    > span { padding: 2px 2px;\n             border-bottom: 1px solid #777; color: #777;\n             margin-right: 16px; white-space: nowrap}\n    > input {\n      display: block;\n      width: 100%;\n      height: 48px;\n      background: none;\n      border: none;\n    }\n"]);return L=function(){return n},n}var R=d.a.label(L()),A=function(n){n.label,n.children;var e=Object(Y.a)(n,["label","children"]);return r.a.createElement(R,null,r.a.createElement("span",null,n.label),r.a.createElement("input",e))};function B(){var n=Object(o.a)(["\n  font-size: 14px;\n  padding: 0 16px;\n\n"]);return B=function(){return n},n}var F=d.a.section(B()),q=function(n){var e=n.value;return r.a.createElement(F,null,r.a.createElement(A,{label:"\u5907\u6ce8",type:"text",value:e,onChange:function(e){n.onChange(e.target.value)}}))};function G(){var n=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  > .output {\n    margin-top: 8px;\n    background: #f5f5f5;\n    font-size: 36px;\n    line-height: 64px;\n    text-align: right;\n    padding: 0 16px;\n  }\n  > .pad {\n  margin:6px;\n    > button {\n    font-size: 1em;\n      border: 5px solid #e5e5e5;\n      background: #bababa;\n      border-radius: 15px;\n      float: left;\n      width: 25%;\n      height: 64px;\n      &.OK {\n      height: 192px;\n      float: right;\n      }\n    }\n  }\n"]);return G=function(){return n},n}var H=d.a.section(G()),P=function(n){var e=Object(a.useState)(n.value.toString()),t=Object(h.a)(e,2),l=t[0],c=t[1],i=function(e){var t;t=e.length>16?e.slice(0,16):0===e.length?"0":e,c(t),n.onChange(parseFloat(t))};return r.a.createElement(H,null,r.a.createElement("div",{className:"output"},l),r.a.createElement("div",{className:"pad clearfix",onClick:function(e){var t=e.target.textContent;if(null!==t)switch(t){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i("0"===l?t:l+t);break;case".":if(l.indexOf(".")>=0)return;i(l+".");break;case"DEL":1===l.length?i("0"):i(l.slice(0,-1));break;case"C":i("0");break;case"OK":n.onOk&&n.onOk()}}},r.a.createElement("button",null,"1"),r.a.createElement("button",null,"2"),r.a.createElement("button",null,"3"),r.a.createElement("button",null,"DEL"),r.a.createElement("button",null,"4"),r.a.createElement("button",null,"5"),r.a.createElement("button",null,"6"),r.a.createElement("button",{className:"OK"},"OK"),r.a.createElement("button",null,"7"),r.a.createElement("button",null,"8"),r.a.createElement("button",null,"9"),r.a.createElement("button",null,"C"),r.a.createElement("button",null,"0"),r.a.createElement("button",null,".")))};function Q(){var n=Object(o.a)(["\n  flex-grow: 1;\n  display: flex;\n  justify-content: flex-end;\n  flex-direction: column;\n  align-items: flex-start;\n  border: 1px solid #777;\n  background: #f5f5f5;\n  margin: 10px;\n  border-radius: 10px;\n  padding: 12px 16px;\n> ol {\n    margin: 0 -12px;\n> li {\n    border: 1px solid #777;\n    display: inline-block;\n    border-radius: 18px;\n    padding: 1px 14px;\n    font-size: 16px;\n    margin: 3px 6px;\n    &.selected {\n    background: #edfa00;\n    }\n}\n}\n> button {\n  background: none;\n  border: none;\n  padding: 2px 2px;\n  border-bottom: 1px solid #777;\n  color: #777;\n  margin-top: 4px;\n  }\n"]);return Q=function(){return n},n}var U=function(n){var e=y(),t=e.tags,a=e.addTag,l=n.value;return r.a.createElement(V,null,r.a.createElement("ol",null,t.map((function(e){return r.a.createElement("li",{key:e.id,onClick:function(){return t=e.id,void(l.indexOf(t)>=0?n.onChange(l.filter((function(n){return n!==t}))):n.onChange([].concat(Object(E.a)(l),[t])));var t},className:(t=e.id,l.indexOf(t)>=0?"selected":"")},e.name);var t}))),r.a.createElement("button",{onClick:function(){a()}},"\u65b0\u589e\u6807\u7b7e"))},V=d.a.section(Q()),W=function(){var n=Object(a.useState)([]),e=Object(h.a)(n,2),t=e[0],r=e[1];Object(a.useEffect)((function(){r(JSON.parse(window.localStorage.getItem("records")||"[]"))}),[]),k((function(){window.localStorage.setItem("records",JSON.stringify(t))}),t);return{records:t,addRecord:function(n){if(n.amount<=0)return alert("\u8bf7\u8f93\u5165\u91d1\u989d"),!1;var e=Object(J.a)(Object(J.a)({},n),{},{createdAt:(new Date).toISOString()});return r([].concat(Object(E.a)(t),[e])),!0}}};function X(){var n=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return X=function(){return n},n}var Z={tagIds:[],note:"",category:"-",amount:0},$=Object(d.a)(v)(X());var _=function(){var n=Object(a.useState)(Z),e=Object(h.a)(n,2),t=e[0],l=e[1],c=W().addRecord,i=function(n){l(Object(J.a)(Object(J.a)({},t),n))};return r.a.createElement($,null,r.a.createElement(U,{value:t.tagIds,onChange:function(n){return i({tagIds:n})}}),r.a.createElement(q,{value:t.note,onChange:function(n){return i({note:n})}}),r.a.createElement(K,{value:t.category,onChange:function(n){return i({category:n})}}),r.a.createElement(P,{value:t.amount,onChange:function(n){return i({amount:n})},onOk:function(){c(t)&&(alert("\u63d0\u4ea4\u6210\u529f"),window.location.reload())}}))},nn=t(27),en=t.n(nn);function tn(){var n=Object(o.a)(["\n  font-size: 18px;\n  line-height: 20px;\n  color: #333;\n  padding: 10px 0 0 16px;\n"]);return tn=function(){return n},n}function an(){var n=Object(o.a)(["\n  display: flex;\n  justify-content: space-between;\n  line-height: 20px;\n  padding: 8px 16px;\n  border: 1px solid #777;\n  background: #f5f5f5;\n  margin: 12px;\n  border-radius: 10px;\n  font-size: inherit;\n> .note{\n    margin-right: auto;\n    margin-left: 16px;\n    color: #999;\n    font-size: 14px;\n}\n"]);return an=function(){return n},n}function rn(){var n=Object(o.a)(["\npadding: 8px 0;\nborder-bottom: 1px solid #777;\n"]);return rn=function(){return n},n}var ln=d.a.div(rn()),cn=d.a.div(an()),un=d.a.h4(tn());var on=function(){var n=Object(a.useState)("-"),e=Object(h.a)(n,2),t=e[0],l=e[1],c=W().records,i=y().getName,u={};c.filter((function(n){return n.category===t})).forEach((function(n){var e=en()(n.createdAt).format("YYYY\u5e74MM\u6708DD\u65e5");e in u||(u[e]=[]),u[e].push(n)}));var o=Object.entries(u).sort((function(n,e){return n[0]===e[0]?0:n[0]>e[0]?-1:n[0]<e[0]?1:0}));return r.a.createElement(v,null,r.a.createElement(ln,null,r.a.createElement(K,{value:t,onChange:function(n){return l(n)}})),o.map((function(n){var e=Object(h.a)(n,2),t=e[0],a=e[1];return r.a.createElement("div",null,r.a.createElement(un,null,t),r.a.createElement("div",null,a.map((function(n){return r.a.createElement(cn,null,r.a.createElement("div",{className:"tags oneLine"},n.tagIds.map((function(n){return r.a.createElement("span",{key:n},i(n))})).reduce((function(n,e,t,a){return n.concat(t<a.length-1?[e,"\uff0c"]:[e])}),[])),n.note&&r.a.createElement("div",{className:"note"},n.note),r.a.createElement("div",{className:"amount"},"\uffe5",n.amount))}))))})))};var dn=function(){return r.a.createElement("div",null,"\u9875\u9762\u4e0d\u5b58\u5728")};function fn(){var n=Object(o.a)(["\n  font-size: 14px;\n  padding: 16px;\n"]);return fn=function(){return n},n}function sn(){var n=Object(o.a)(["\n     display: flex;\n     justify-content: space-between;\n     line-height: 20px;\n          border-bottom: 1px solid #777 ;\n     > div,span {\n          margin: 16px;\n     }\n"]);return sn=function(){return n},n}var mn=function(){var n=y(),e=n.findTag,t=n.updateTag,a=n.deleteTag,l=Object(u.h)().id,c=e(parseInt(l)),i=Object(u.g)(),o=function(){i.goBack()};return r.a.createElement(v,null,r.a.createElement(pn,null,r.a.createElement("span",{onClick:o}," \u2190 "),r.a.createElement("div",null,"\u7f16\u8f91\u6807\u7b7e"),r.a.createElement("span",null,"\u3000")),c?function(n){return r.a.createElement("div",null,r.a.createElement(bn,null,r.a.createElement(A,{label:"\u6807\u7b7e\u540d",type:"text",placeholder:"\u70b9\u51fb\u8f93\u5165\u6807\u7b7e\u540d",value:n.name,onChange:function(e){t(n.id,{name:e.target.value})}})),r.a.createElement(N,null,r.a.createElement(C,{onClick:function(){a(n.id),o()}},"\u5220\u9664\u6807\u7b7e")))}(c):r.a.createElement(N,null," tag \u4e0d\u5b58\u5728"))},pn=d.a.header(sn()),bn=d.a.div(fn());var gn=function(){return r.a.createElement(i.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/tags/:id",exact:!0},r.a.createElement(mn,null)),r.a.createElement(u.b,{path:"/tags",exact:!0},r.a.createElement(T,null)),r.a.createElement(u.b,{path:"/copper",exact:!0},r.a.createElement(_,null)),r.a.createElement(u.b,{path:"/statistics",exact:!0},r.a.createElement(on,null)),r.a.createElement(u.a,{exact:!0,from:"/",to:"/copper"}),r.a.createElement(u.b,{path:"*"},r.a.createElement(dn,null))))};t(40);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(gn,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.1f1285c8.chunk.js.map